Лабораторная работа №3
Задание на лабораторную работу
В процессе написания тестовых заданий ознакомиться с общими принципами создания многопоточных приложений.
Задание 1 +
Создать два класса нитей (наследуют от класса Thread), взаимодействующих с помощью промежуточного объекта типа интерфейс 
Транспортного средства.
Первая нить последовательно выводит на экран цены на модели транспортного средства.
Вторая нить последовательно выводит на экран названия моделей транспортного средства.
В методе main() следует создать 3 участвующих в процессе объекта (транспортное средство и две нити) и запустить нити на выполнение.
Запустите программу несколько раз. Попробуйте варьировать приоритеты нитей.
Задание 2 +
Создайте два новых класса нитей (реализуют интерфейс Runnable), обеспечивающих последовательность операций вывода моделей 
и цен на модели (т.е. на экран выводятся модель-цена-модель-цена…) независимо от приоритетов потоков. 
Для этого потребуется описать некий вспомогательный класс TransportSynchronizer, объект которого будет использоваться при взаимодействии нитей.

    public TransportSynchronizer(Transport v) {
        this.v = v;
    }
   
    public double printPrice() throws InterruptedException {
        double val;
        synchronized(lock) {
            double [] p = v.getPrices();
            if (!canPrintPrice()) throw new InterruptedException();
            while (!set)
                lock.wait();
            val = p[current++];
            System.out.println("Print price: " + val);
            set = false;
            lock.notifyAll();
        }
        return val;
    }  
   
    public void printModel() throws InterruptedException {
        synchronized(lock) {
            String [] s = v.getModels();
            if (!canPrintModel()) throw new InterruptedException();
            while (set)
                lock.wait();
            System.out.println("Print model: " + s[current]);
            set = true;
            lock.notifyAll();
        }
    }
    
    public boolean canPrintPrice() {
        return current < v.getSize();
    }
    
    public boolean canPrintModel() {
        return (!set && current < v.getSize()) || (set && current < v.getSize() - 1);
    }
}

Задание 3
Создайте два новых класса нитей (реализуют интерфейс Runnable), обеспечивающих вывод сначала всех моделей, 
а затем всех цен на модели (возможен вывод сначала всех цен, а затем всех моделей). Использовать ReentrantLock.
Задание 4
Создайте новый класс нитей (реализует интерфейс Runnable), обеспечивающий вывод на экран марки транспортного средства.
В методе main() следует создать четыре участвующих в процессе транспортных средства и пул потоков размерностью два. 
Использовать класс Executors. Запустить программу несколько раз и проанализировать результаты.
Задание 5
Создайте новый класс нитей (реализует интерфейс Runnable), обеспечивающий считывание из файла названия марки и создание 
экземпляра класса, реализующего интерфейс Transport. Имя файла передаётся как параметр в конструктор нити. 
Также вторым параметром передаётся экземпляр BlockingQueue (рекомендуется использовать реализацию ArrayBlockingQueue). 
Нить должна считать название марки транспортного средства из файла, создать экземпляр транспортного средства и положить 
его в очередь, используя метод put().
Создайте вручную 5 текстовых файлов, в каждом из которых добавьте одну строчку, содержащую название марки автомобиля.
В методе main() следует создать экземпляр ArrayBlockingQueue и завести массив имён созданных файлов, для каждого из которых 
в цикле необходимо создать и запустить на исполнение экземпляр нити, передав в конструктор путь к очередному файлу и ссылку на очередь.
Далее в цикле необходимо считать из очереди все пришедшие транспортные средства, используя метод take(), и вывести их названия в консоль. 
Посмотрите, как меняется исполнение программы при замене метода put() на add() и при варьировании длины очереди от 1 до 5.
